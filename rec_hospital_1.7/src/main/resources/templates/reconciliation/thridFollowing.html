<div class="m-content-wrapper">
	<div class="table-content-wrap">
		<div class="row tool-box-content" >
			<form class="form-inline m-search" id="thridFollowingSearchForm">
				<div class="form-group">
					<label class="search-label">所属机构：</label>
					<div class="form-group no-margin">
						<input type="text" style="width: 220px;" class="form-control "
							data-name="code" id="thridFollowingTree" placeholder="所属机构" />
					</div>
				</div>
				<div class="form-group">
					<label class="search-label" for="beginTime">时间：</label><div class="input-group">
						<div class="input-group-addon">
							<i class="fa fa-calendar"></i>
						</div>
						<input AUTOCOMPLETE="off" type="text"
							class="form-control pull-right" placeholder="开始时间"
							name="beginTime">
					</div>
				</div>
				<!-- <div class="form-group">
					<label for="beginTime">日期：</label>
					<div class="input-group">
						<div class="input-group-addon">
							<i class="fa fa-calendar"></i>
						</div>
						<input AUTOCOMPLETE="off" type="text"
							class="form-control pull-right" name="beginTime">
					</div>
				</div> -->
				<div class="form-group m-btn">
					<button type="button" class="btn btn-primary"
						onclick="app.admin.thridFollowing.search()">查询</button>
					<a onclick='app.admin.thridFollowing.exportData()'
						class="btn btn-success">导出</a> <a
						onclick='app.admin.thridFollowing.startRec()'
						class="btn btn-primary">对账</a>
				</div>
			</form>
		</div>

		<div class="row" >
			<input type="hidden" th:value="${orgJSON}" id="thridFollowingOrgNo">
			<input type="hidden" th:value="${typesJSON}" id="thridFollowingType">
			<input type="hidden" th:value="${tradeDate}"
				id="thridFollowingTradeDate">

			<h4>汇总(单位:元)</h4>
			<table class="table table-bordered table-nomal "
				id="thridFollowingSumDataTable" data-striped="false">
				<thead>
					<tr>
						<th data-formatter="app.admin.thridFollowing.number"
							>序号</th>
						<th data-field="patType" data-sortable="true"
							data-formatter="app.admin.thridFollowing.formatter">患者类型</th>
						<th data-field="tradeDate" data-sortable="true">账单日期</th>
						<th data-field="hisAllAmount" data-sortable="true"
							data-formatter="app.admin.thridFollowing.moneyFormat">HIS总金额</th>
						<th data-field="payAllAmount" data-sortable="true"
							data-formatter="app.admin.thridFollowing.moneyFormat">支付渠道交易总额</th>
						<th data-field="recPayAllAmount" data-sortable="true"
							data-formatter="app.admin.thridFollowing.moneyFormat">平台交易总额</th>
						<th data-field="alipayAllAmount" data-sortable="true"
							data-formatter="app.admin.thridFollowing.moneyFormat">支付宝总金额</th>
						<th data-field="wechatAllAmount" data-sortable="true"
							data-formatter="app.admin.thridFollowing.moneyFormat">微信总金额</th>
						<th data-field="bankAllAmount" data-sortable="true"
							data-formatter="app.admin.thridFollowing.moneyFormat">银行总金额</th>
						<th data-field="socialInsuranceAmount" data-sortable="true"
							data-formatter="app.admin.thridFollowing.moneyFormat">社保总金额</th>
						<!-- <th data-field="handlerDiffAmount">处理后的差额</th> -->
						<th data-field="exceptionResult" data-sortable="true">异常结果</th>
					</tr>
				</thead>
			</table>
		</div>
		<div class="row" >
			<h4>异常账单</h4>
			<table class="table table-bordered table-nomal "
				id="thridFollowingDataTable" data-striped="false">
				<thead>
					<tr>
						<th 
							data-formatter="app.admin.thridFollowing.number">序号</th>
						<!-- <th data-field="id"  data-formatter="app.admin.thridFollowing.formatHandler">处理</th> -->
						<th data-field="orgNo" data-sortable="true"
							data-formatter="app.admin.thridFollowing.orgFormatter">院区</th>
						<th data-field="payFlowNo" data-sortable="true">支付商户流水号</th>
						<th data-field="payType" data-sortable="true"
							data-formatter="app.admin.thridFollowing.formatter">支付类型</th>
						<th data-field="orderState" data-sortable="true"
							data-formatter="app.admin.thridFollowing.formatter">订单状态</th>
						<th data-field="orgAmount" data-sortable="true"
							data-formatter="app.admin.thridFollowing.moneyFormat">his金额</th>
						<th data-field="platformAmount" data-sortable="true"
							data-formatter="app.admin.thridFollowing.moneyFormat">平台金额</th>
						<th data-field="thirdAmount" data-sortable="true"
							data-formatter="app.admin.thridFollowing.moneyFormat">支付渠道金额</th>
						<th data-field="custName" data-sortable="true">患者名称</th>
						<th data-field="reconciliationDate" data-sortable="true">交易时间</th>
						<th data-field="payBusinessType" data-sortable="true"
							data-formatter="app.admin.thridFollowing.formatter"
							data-width="100">业务类型</th>
					</tr>
				</thead>
			</table>
		</div>
	</div>
</div>
<div class="modal fade" id="followLoading" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" data-backdrop='static'>
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title" id="myModalLabel">提示</h4>
			</div>
			<div class="modal-body">请稍候。。。</div>
		</div>
	</div>
</div>
<script type="text/javascript"
	th:src="@{/assets/js/admin/thridFollowing.js}"></script>
<script th:inline="javascript">

var orgJSON = [[${orgJSON}]];
var orgNo = [[${orgNo}]];
app.admin.thridFollowing.init(orgJSON,orgNo);
</script>
